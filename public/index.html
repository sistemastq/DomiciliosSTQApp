<!DOCTYPE html>
<html class="dark" lang="es">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Domicilios Tierra Querida</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script id="tailwind-config">
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#D92B2B",
              "background-light": "#f8f6f6",
              "background-dark": "#1E1E1E",
            },
            fontFamily: {
              display: ["Plus Jakarta Sans", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.25rem",
              lg: "0.5rem",
              xl: "0.75rem",
              full: "9999px",
            },
          },
        },
      };
    </script>

    <!-- Fuentes -->
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet"
    />

    <!-- CSS propio -->
    <link rel="stylesheet" href="/styles.css" />
  </head>

  <body
    id="home-page"
    class="bg-background-light dark:bg-background-dark font-display"
  >
    <!-- PANTALLA DE CARGA GLOBAL -->
    <div
      id="page-loader"
      class="fixed inset-0 z-[9999] flex items-center justify-center bg-black/90 backdrop-blur-sm transition-opacity duration-300"
    >
      <div class="flex flex-col items-center gap-4">
        <img
          src="/img/loader.gif"
          alt="Cargando Tierra Querida"
          class="w-32 h-32 object-contain"
        />
        <p
          class="text-xs sm:text-sm font-semibold tracking-[0.3em] uppercase text-white/80 text-center"
        >
          Cargando
        </p>
      </div>
    </div>

    <div class="app-root" id="app-root">
      <!-- Banner superior -->
      <div id="top-banner" class="bg-[#FFC700] p-2 text-center">
        <h3 class="text-black tracking-light text-sm font-bold leading-tight">
          Env√≠o gratis en pedidos superiores a $100.000 cop
        </h3>
      </div>

      <!-- Header PRINCIPAL -->
      <header
        id="main-header"
        class="sticky top-0 z-20 bg-background-light dark:bg-background-dark/90 px-4 py-2 backdrop-blur-sm shadow-sm shadow-black/10"
      >
        <div class="grid grid-cols-[auto,1fr,auto] items-center w-full">
          <!-- HEADER: IZQUIERDA (USUARIO + NOMBRE) -->
          <div id="header-left" class="flex items-center gap-2">
            <button class="icon-button" id="user-icon">
              <span class="material-symbols-outlined text-2xl">person</span>
            </button>
            <span
              id="user-name-header"
              class="hidden text-xs sm:text-sm font-semibold text-black dark:text-white truncate max-w-[120px]"
            ></span>
          </div>

          <!-- HEADER: CENTRO (LOGO) -->
          <div id="header-center" class="flex items-center justify-center">
            <img
              src="/img/logo.png"
              alt="Domicilios Tierra Querida"
              class="h-10 sm:h-12 md:h-14 w-auto object-contain"
            />
          </div>

          <!-- HEADER: DERECHA (MEN√ö + CARRITO) -->
          <div
            id="header-right"
            class="flex items-center justify-end gap-2"
          >
            <button class="icon-button" id="menu-icon">
              <span class="material-symbols-outlined text-2xl">menu</span>
            </button>
            <button class="icon-button relative" id="cart-icon">
              <span class="material-symbols-outlined text-2xl">
                shopping_cart
              </span>
              <span
                class="cart-count absolute -top-1 -right-2 text-[10px] rounded-full bg-primary text-white px-1.5 py-0.5 leading-none"
                id="cart-count"
              >
                0
              </span>
            </button>
          </div>
        </div>
      </header>

      <!-- Men√∫ lateral -->
      <nav class="menu" id="menu">
        <ul id="menu-list">
          <li class="menu-item">
            <a href="/stores">Puntos de venta</a>
          </li>
          <li class="menu-item">
            <a href="/history">Hist√≥rico de pedidos</a>
          </li>

          <!-- aparece solo si NO est√° logueado -->
          <li class="menu-item" id="menu-login-item">
            <a href="/login">Iniciar sesi√≥n</a>
          </li>

          <!-- aparece solo si S√ç est√° logueado -->
          <li class="menu-item hidden" id="menu-logout-item">
            <button type="button" id="logout-button" class="w-full text-left">
              Cerrar sesi√≥n
            </button>
          </li>
        </ul>
        <button class="close-menu" id="close-menu">
          <span class="material-symbols-outlined">close</span>
        </button>
      </nav>

      <!-- Overlay men√∫ -->
      <div class="overlay" id="overlay"></div>

      <!-- HERO CAROUSEL con imagen + texto -->
      <section class="hero-section mt-3" id="hero-section">
        <div id="hero-carousel" class="hero-carousel"></div>

        <!-- Flechas navegaci√≥n -->
        <button
          id="hero-prev"
          class="hero-arrow hero-arrow--left"
          aria-label="Anterior"
        >
          ‚Äπ
        </button>
        <button
          id="hero-next"
          class="hero-arrow hero-arrow--right"
          aria-label="Siguiente"
        >
          ‚Ä∫
        </button>

        <!-- Dots -->
        <div id="hero-dots" class="hero-dots"></div>
      </section>

      <!-- Tabs / Filtros (categor√≠as por tipo, SIN adiciones) -->
      <nav class="category-nav" id="category-nav">
        <div
          id="category-tabs"
          class="flex border-b border-gray-200 dark:border-white/20 overflow-x-auto flex-nowrap gap-3 px-4 no-scrollbar"
        >
          <button
            id="tab-hamburguesas"
            class="tab-btn tab-btn--active flex-shrink-0"
            data-tipo="1"
          >
            <p class="tab-label">Hamburguesas</p>
          </button>
          <button
            id="tab-combos"
            class="tab-btn flex-shrink-0"
            data-tipo="3"
          >
            <p class="tab-label">Combos</p>
          </button>
          <button
            id="tab-papas"
            class="tab-btn flex-shrink-0"
            data-tipo="4"
          >
            <p class="tab-label">Papas</p>
          </button>
          <button
            id="tab-bebidas"
            class="tab-btn flex-shrink-0"
            data-tipo="6"
          >
            <p class="tab-label">Bebidas</p>
          </button>
        </div>
      </nav>

      <!-- Productos (carrusel horizontal) -->
      <section class="products-section py-6" id="products-section">
        <div class="max-w-6xl mx-auto px-4">
          <!-- Encabezado + flechas -->
          <div
            id="products-header"
            class="flex items-center justify-between mb-4"
          >
            <h2
              class="text-xl sm:text-2xl font-extrabold text-black dark:text-white"
            >
              Nuestro men√∫
            </h2>
            <div class="flex gap-2">
              <button
                id="products-prev"
                class="flex items-center justify-center h-9 w-9 rounded-full border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 bg-white dark:bg-[#181818] disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-[#262626] transition"
                disabled
                aria-label="Productos anteriores"
              >
                <span class="material-symbols-outlined text-base"
                  >chevron_left</span
                >
              </button>
              <button
                id="products-next"
                class="flex items-center justify-center h-9 w-9 rounded-full border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-200 bg-white dark:bg-[#181818] disabled:opacity-40 disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-[#262626] transition"
                aria-label="M√°s productos"
              >
                <span class="material-symbols-outlined text-base"
                  >chevron_right</span
                >
              </button>
            </div>
          </div>

          <!-- Carrusel de productos -->
          <div class="relative" id="products-carousel-wrapper">
            <div
              id="products-viewport"
              class="overflow-x-auto overflow-y-visible no-scrollbar"
            >
              <!-- Aqu√≠ solo se van a renderizar m√°x 5 tarjetas (4 completas + 1 asomada) -->
              <div id="products-container" class="flex gap-4 py-1"></div>
            </div>

            <!-- Difuminado del lado derecho cuando hay m√°s productos -->
            <div
              id="products-fade-right"
              class="pointer-events-none absolute right-0 top-0 h-full w-12 bg-gradient-to-l from-background-light dark:from-background-dark to-transparent opacity-0 transition-opacity duration-300"
            ></div>
          </div>
        </div>
      </section>

      <!-- ABOUT / QUI√âNES SOMOS -->
      <section
        class="bg-background-light dark:bg-[#020617] py-12 sm:py-16"
        id="about-section"
      >
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
          <div
            class="grid gap-10 lg:gap-14 lg:grid-cols-[minmax(0,1.05fr)_minmax(0,1fr)] items-center"
          >
            <!-- IMAGEN / EQUIPO -->
            <div class="relative" id="about-image-wrapper">
              <div
                class="absolute -inset-0.5 rounded-3xl bg-gradient-to-br from-primary/80 via-red-900/60 to-black/80 opacity-70 blur-xl"
                aria-hidden="true"
              ></div>

              <div
                class="relative rounded-3xl overflow-hidden bg-black shadow-xl shadow-black/40"
              >
                <img
                  src="./img/empleados.png"
                  alt="Equipo de Tierra Querida"
                  class="w-full h-full object-cover max-h-[420px]"
                />
              </div>

              <div
                class="hidden sm:flex items-center gap-2 px-4 py-2 rounded-full bg-black/85 text-white text-xs sm:text-sm shadow-lg shadow-black/40 absolute -bottom-4 left-4"
              >
                <span
                  class="inline-block h-2 w-2 rounded-full bg-emerald-400"
                ></span>
                <span>+100 puntos de venta en Colombia</span>
              </div>
            </div>

            <!-- TEXTO -->
            <div class="space-y-5 sm:space-y-6" id="about-text-block">
              <p
                class="inline-flex items-center gap-2 text-[11px] sm:text-xs font-semibold uppercase tracking-[0.28em] text-primary"
              >
                #Movimiento TQ
                <span
                  class="h-px w-10 bg-primary/70 hidden sm:inline-block"
                ></span>
              </p>

              <h2
                class="text-2xl sm:text-3xl lg:text-4xl font-extrabold tracking-tight text-black dark:text-white"
              >
                ¬øQui√©nes Somos?
              </h2>

              <p
                class="text-sm sm:text-base leading-relaxed text-gray-700 dark:text-gray-300"
              >
                Hace 5 a√±os, empezamos en una cocina peque√±a con una idea
                grande: llevar hamburguesas honestas, hechas al momento, a cada
                rinc√≥n de esta Tierra Querida.
              </p>

              <p
                class="text-sm sm:text-base leading-relaxed text-gray-700 dark:text-gray-300"
              >
                Sin letreros luminosos ni grandes campa√±as. Solo una plancha
                caliente, 4 amigos con ganas de emprender y cientos de clientes
                que fueron pasando la voz, mordida tras mordida.
              </p>

              <p
                class="text-sm sm:text-base leading-relaxed text-gray-700 dark:text-gray-300"
              >
                Hoy seguimos siendo la misma cocina inquieta, pero con un sue√±o
                m√°s grande: que cada pedido se sienta como comer en casa, sin
                perder el sabor callejero que nos trajo hasta aqu√≠.
              </p>

              <div
                class="flex flex-col sm:flex-row sm:items-center gap-4 pt-2 sm:pt-3"
              >
                <a
                  id="about-cta-stores"
                  href="/stores"
                  class="inline-flex items-center justify-center px-6 py-2.5 rounded-full bg-primary text-white text-sm font-bold tracking-[0.04em] shadow-lg shadow-primary/40 hover:shadow-primary/60 hover:brightness-110 transition"
                >
                  Pide aqu√≠
                  <span class="material-symbols-outlined ml-1 text-base">
                    arrow_forward
                  </span>
                </a>

                <div
                  class="flex items-center gap-3 text-sm text-gray-600 dark:text-gray-300"
                >
                  <span class="hidden sm:inline">S√≠guenos</span>
                  <a
                    id="social-facebook"
                    href="https://www.facebook.com"
                    target="_blank"
                    class="flex h-9 w-9 items-center justify-center rounded-full bg-black text-white hover:bg-primary transition"
                    aria-label="Facebook"
                  >
                    <span class="material-symbols-outlined text-[18px]">
                      facebook
                    </span>
                  </a>
                  <a
                    id="social-instagram"
                    href="https://www.instagram.com"
                    target="_blank"
                    class="flex h-9 w-9 items-center justify-center rounded-full bg-black text-white hover:bg-primary transition"
                    aria-label="Instagram"
                  >
                    <span class="material-symbols-outlined text-[18px]">
                      camera_alt
                    </span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- INSTAGRAM / STORIES -->
      <section
        class="py-10 bg-background-light dark:bg-background-dark"
        id="instagram-section"
      >
        <div class="max-w-6xl mx-auto px-4">
          <h2
            class="text-center text-2xl md:text-3xl font-extrabold tracking-tight text-black dark:text-white mb-6"
          >
            S√≠guenos en Instagram
            <span class="text-primary">@tierraquerida20</span>
          </h2>

          <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
            <!-- Card 1 -->
            <a
              id="instagram-card-1"
              href="https://www.instagram.com/tierraquerida20/"
              target="_blank"
              rel="noopener noreferrer"
              class="group relative aspect-[9/16] overflow-hidden rounded-3xl bg-black/50 shadow-xl"
            >
              <img
                src="./img/ig-story-1.webp"
                alt="Cliente disfrutando una hamburguesa Tierra Querida"
                class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              />
              <div
                class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/80 via-black/10 to-transparent"
              ></div>
              <div
                class="absolute inset-x-0 bottom-0 p-3 flex items-center justify-between"
              >
                <p class="text-white text-sm font-semibold"></p>
                <span
                  class="inline-flex items-center gap-1 rounded-full bg-white/10 px-2 py-1 text-[11px] font-semibold text-white backdrop-blur-sm group-hover:bg-white/20"
                >
                  Ver en Instagram
                </span>
              </div>
            </a>

            <!-- Card 2 -->
            <a
              id="instagram-card-2"
              href="https://www.instagram.com/tierraquerida20/"
              target="_blank"
              rel="noopener noreferrer"
              class="group relative aspect-[9/16] overflow-hidden rounded-3xl bg-black/50 shadow-xl"
            >
              <img
                src="./img/ig-story-2.webp"
                alt="Amigos comiendo papas y hamburguesas en Tierra Querida"
                class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              />
              <div
                class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/80 via-black/10 to-transparent"
              ></div>
              <div
                class="absolute inset-x-0 bottom-0 p-3 flex items-center justify-between"
              >
                <p class="text-white text-sm font-semibold"></p>
                <span
                  class="inline-flex items-center gap-1 rounded-full bg-white/10 px-2 py-1 text-[11px] font-semibold text-white backdrop-blur-sm group-hover:bg-white/20"
                >
                  Ver en Instagram
                </span>
              </div>
            </a>

            <!-- Card 3 -->
            <a
              id="instagram-card-3"
              href="https://www.instagram.com/tierraquerida20/"
              target="_blank"
              rel="noopener noreferrer"
              class="group relative aspect-[9/16] overflow-hidden rounded-3xl bg-black/50 shadow-xl"
            >
              <img
                src="./img/ig-story-3.webp"
                alt="Caravana de Tierra Querida por las calles de la ciudad"
                class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              />
              <div
                class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/80 via-black/10 to-transparent"
              ></div>
              <div
                class="absolute inset-x-0 bottom-0 p-3 flex items-center justify-between"
              >
                <p class="text-white text-sm font-semibold"></p>
                <span
                  class="inline-flex items-center gap-1 rounded-full bg-white/10 px-2 py-1 text-[11px] font-semibold text-white backdrop-blur-sm group-hover:bg-white/20"
                >
                  Ver en Instagram
                </span>
              </div>
            </a>

            <!-- Card 4 -->
            <a
              id="instagram-card-4"
              href="https://www.instagram.com/tierraquerida20/"
              target="_blank"
              rel="noopener noreferrer"
              class="group relative aspect-[9/16] overflow-hidden rounded-3xl bg-black/50 shadow-xl"
            >
              <img
                src="./img/ig-story-4.webp"
                alt="Vista a√©rea de Cartagena con punto Tierra Querida"
                class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              />
              <div
                class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/80 via-black/10 to-transparent"
              ></div>
              <div
                class="absolute inset-x-0 bottom-0 p-3 flex items-center justify-between"
              >
                <p class="text-white text-sm font-semibold"></p>
                <span
                  class="inline-flex items-center gap-1 rounded-full bg-white/10 px-2 py-1 text-[11px] font-semibold text-white backdrop-blur-sm group-hover:bg-white/20"
                >
                  Ver en Instagram
                </span>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer class="bg-black/90 text-white mt-10" id="main-footer">
        <div class="container mx-auto px-4 py-8">
          <div class="text-center text-sm text-white/70 flex flex-col gap-2">
            <p class="text-xs text-white/50 mt-4">
              ¬© 2025 Tierra Querida. All Rights Reserved.
            </p>
          </div>
        </div>
      </footer>
    </div>

    <!-- MODAL DE ZOOM PARA EL CARRUSEL -->
    <div id="image-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <button class="modal-close" aria-label="Cerrar">‚úï</button>
        <img id="modal-image" src="" alt="" class="modal-image" />
        <p id="modal-caption" class="modal-caption"></p>
      </div>
    </div>

    <!-- MODAL PERFIL DE USUARIO -->
    <div
      id="user-modal"
      class="fixed inset-0 z-40 hidden items-center justify-center bg-black/60"
    >
      <div
        class="bg-background-light dark:bg-background-dark rounded-xl p-4 w-full max-w-md mx-4 shadow-lg relative"
      >
        <button
          id="user-modal-close"
          class="absolute top-2 right-2 text-sm text-gray-500 dark:text-gray-300"
        >
          ‚úï
        </button>
        <h2
          class="text-lg font-bold mb-3 text-black dark:text-white text-center"
        >
          Mi perfil
        </h2>

        <form id="user-form" class="space-y-3">
          <div>
            <label
              class="block text-sm font-medium text-black dark:text-white mb-1"
            >
              Nombre
            </label>
            <input
              id="user-name-input"
              type="text"
              class="w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black/40 px-3 py-2 text-sm text-black dark:text-white"
            />
          </div>

          <div>
            <label
              class="block text-sm font-medium text-black dark:text-white mb-1"
            >
              Correo
            </label>
            <input
              id="user-email-input"
              type="email"
              disabled
              class="w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-100 dark:bg-black/40 px-3 py-2 text-sm text-gray-500 cursor-not-allowed"
            />
          </div>

          <div>
            <label
              class="block text-sm font-medium text-black dark:text-white mb-1"
            >
              Celular (+57)
            </label>
            <input
              id="user-phone-input"
              type="tel"
              placeholder="+573001112233"
              class="w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black/40 px-3 py-2 text-sm text-black dark:text-white"
            />
          </div>

          <div>
            <label
              class="block text-sm font-medium text-black dark:text-white mb-1"
            >
              Direcci√≥n de entrega
            </label>
            <input
              id="user-address-input"
              type="text"
              class="w-full rounded-lg border border-gray-300 dark:border-gray-700 bg-white dark:bg-black/40 px-3 py-2 text-sm text-black dark:text-white"
            />
          </div>

          <button
            type="submit"
            class="mt-2 w-full rounded-xl bg-primary text-white text-sm font-bold py-2.5"
          >
            Guardar cambios
          </button>
        </form>
      </div>
    </div>

    <!-- MODAL: CARRITO VAC√çO -->
    <div id="empty-cart-modal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div
        class="modal-content relative max-w-sm w-full mx-4 bg-background-light dark:bg-background-dark rounded-xl p-5 shadow-2xl flex flex-col gap-3"
      >
        <!-- Bot√≥n X -->
        <button
          id="empty-cart-close"
          class="absolute top-2 right-2 text-gray-500 dark:text-gray-300 hover:text-primary transition-colors text-sm"
          aria-label="Cerrar"
        >
          ‚úï
        </button>

        <h2 class="text-lg font-bold text-black dark:text-white">
          Tu carrito est√° vac√≠o
        </h2>

        <p class="text-sm text-gray-700 dark:text-gray-300">
          A√∫n no has agregado nada. Explora el men√∫ y arma tu pedido a tu gusto
          üçîüçü
        </p>

        <button
          id="empty-cart-go"
          class="mt-2 inline-flex items-center justify-center px-4 py-2 rounded-full bg-primary text-white text-sm font-bold tracking-wide hover:brightness-110 transition"
        >
          Ir al men√∫
        </button>
      </div>
    </div>

    <!-- Toast simple -->
    <div
      id="toast"
      class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 hidden px-4 py-2 rounded-lg bg-black/80 text-white text-xs sm:text-sm shadow-lg"
    ></div>

    <!-- SCRIPT DEL LOADER (envolviendo fetch) -->
    <script>
      (function () {
        const loader = document.getElementById("page-loader");
        if (!loader) return;

        function showLoader() {
          loader.style.display = "flex";
          loader.classList.remove("opacity-0", "pointer-events-none");
        }

        function hideLoader() {
          loader.classList.add("opacity-0", "pointer-events-none");
          setTimeout(() => {
            loader.style.display = "none";
          }, 350);
        }

        window.TQShowLoader = showLoader;
        window.TQHideLoader = hideLoader;

        window.addEventListener("load", hideLoader);

        if (window.fetch) {
          const originalFetch = window.fetch.bind(window);
          let pending = 0;

          window.fetch = (...args) => {
            pending++;
            showLoader();
            return originalFetch(...args).finally(() => {
              pending--;
              if (pending <= 0) hideLoader();
            });
          };
        }
      })();
    </script>

    <!-- SCRIPT MODAL CARRITO VAC√çO + manejo del icono del carrito -->
    <script>
      (function () {
        const modal = document.getElementById("empty-cart-modal");
        if (!modal) return;

        const backdrop = modal.querySelector(".modal-backdrop");
        const closeBtn = document.getElementById("empty-cart-close");
        const goBtn = document.getElementById("empty-cart-go");

        function openEmptyCartModal() {
          modal.classList.remove("hidden");
          modal.classList.add("open");
        }

        function closeEmptyCartModal() {
          modal.classList.remove("open");
          modal.classList.add("hidden");
        }

        // Exponer funci√≥n global
        window.openEmptyCartModal = openEmptyCartModal;

        closeBtn?.addEventListener("click", closeEmptyCartModal);
        backdrop?.addEventListener("click", closeEmptyCartModal);
        goBtn?.addEventListener("click", () => {
          closeEmptyCartModal();
          if (window.location.pathname !== "/") {
            window.location.href = "/";
          }
        });

        // Manejo del icono del carrito
        const cartIcon = document.getElementById("cart-icon");
        if (cartIcon) {
          cartIcon.addEventListener("click", (event) => {
            event.preventDefault();

            let items = [];
            try {
              const raw = localStorage.getItem("cart");
              items = raw ? JSON.parse(raw) : [];
            } catch (e) {
              items = [];
            }

            if (!items || items.length === 0) {
              openEmptyCartModal();
              return;
            }

            window.location.href = "/cart";
          });
        }
      })();
    </script>

    <!-- JS del front (el index.js que ya tienes) -->
    <script type="module" src="/index.js"></script>
  </body>
</html>
